{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "go",
      "request": "launch",
      "name": "Debug Fabric CLI",
      "mode": "debug",
      "program": "${workspaceFolder}/${input:fabricMainDir}",
      "cwd": "${workspaceFolder}",
      "stopOnEntry": false,
      "showLog": false,
      "env": {},
      "args": []
    },
    {
      "type": "go",
      "request": "launch",
      "name": "Test Package",
      "mode": "test",
      "program": "${workspaceFolder}/${input:testPackageDir}",
      "cwd": "${workspaceFolder}",
      "showLog": false,
      "env": {},
      "args": []
    },
    {
      "type": "go",
      "request": "launch",
      "name": "Debug Single TestSysPlugin",
      "mode": "test",
      "program": "${workspaceFolder}/internal/plugins/template",
      "cwd": "${workspaceFolder}",
      "showLog": false,
      "env": {},
      "args": [
        "-test.run",
        "^TestSysPlugin$"
      ],
      "buildFlags": [
        "-gcflags=all=-N -l"
      ],
      "stopOnEntry": true
    },
    {
      "type": "go",
      "request": "launch",
      "name": "Debug Built Binary (exec)",
      "mode": "exec",
      "program": "${workspaceFolder}/${input:builtBinaryPath}",
      "cwd": "${workspaceFolder}",
      "stopOnEntry": false,
      "showLog": false,
      "preLaunchTask": "go: build binary"
    }
  ],
  "inputs": [
    {
      "id": "fabricMainDir",
      "type": "promptString",
      "description": "Enter the relative path to the main package folder (e.g. cmd/fabric)",
      "default": "cmd/fabric"
    },
    {
      "id": "testPackageDir",
      "type": "promptString",
      "description": "Enter the relative path to the Go package you want to test (e.g. internal/plugins/template)",
      "default": "internal/plugins/template"
    },
    {
      "id": "builtBinaryPath",
      "type": "promptString",
      "description": "Enter the relative path to a pre-built Fabric binary to debug (e.g. fabric-debug/fabric)",
      "default": "fabric-debug/fabric"
    }
  ]
}
